{% extends "home/base_home.html" %}
{% load static %}

{% block content %}

{% include "includes/header.html" %}

<div class="grid-container" style="font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;">

  <!-- Primer bloque: Destacado (izquierda) + Secundarios (derecha) -->
  <section class="grid-x grid-margin-x" style="margin-top: 2rem; margin-bottom: 3rem;">

    <!-- ✅ ARTÍCULO DESTACADO - Lado izquierdo (en desktop) -->
    <div class="cell small-12 large-6">
      <div class="card" style="
        border-radius: 12px;
        overflow: hidden;
        box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        height: 100%;
        transition: transform 0.3s ease;
          " onmouseover="this.style.transform='scale(1.01)';" onmouseout="this.style. transform='none';">
            <img
              src="{{ portada.image.url }}"
              srcset="
                {{ portada.image.url }} 300w,

              "
              sizes="(max-width: 600px) 300px, 800px"
              alt="{{ portada.title }}"
              style="width: 100%; height: 260px; object-fit: cover;"
            >
        <div class="card-section" style="padding: 1.5rem;">
          <h3><a href="{% url 'entrada_app:entry-detail' portada.id %}" style="color: #0d47a1; margin-top: 0; font-size: 1.4rem; font-weight: 600;">
            {{ portada.title }}
          </a></h3>
          <p style="color: #555; line-height: 1.6;">{{ portada.resume | truncatechars:120 }}</p>
          <a href="{% url 'entrada_app:entry-detail' portada.id %}" class="button small" style="
            background-color: #0d47a1;
            border-radius: 20px;
            padding: 0.5rem 1.2rem;
            font-size: 0.9rem;
            margin-top: 0.8rem;
          ">👉 Ver detalles</a>
        </div>
      </div>
    </div>

    <!-- ✅ ARTÍCULOS SECUNDARIOS - Lado derecho (en desktop) -->
    <div class="cell small-12 large-6">
      <div class="grid-x grid-margin-y">
        {% for entrada in entradas_home %}
          <div class="cell small-12">
            <div class="callout" style="
              margin-top: 3rem;
              display: flex;
              gap: 1rem;
              background: white;
              border: 1px solid #e0e0e0;
              border-radius: 8px;
              padding: 0.8rem;
              box-shadow: 0 2px 5px rgba(0,0,0,0.05);
              transition: box-shadow 0.3s ease;
            " onmouseover="this.style.boxShadow='0 4px 8px rgba(0,0,0,0.1)';" onmouseout="this.style.boxShadow='0 2px 5px rgba(0,0,0,0.05)';">
              <img src="{{ entrada.image.url }}" alt="{{ entrada.title }}" style="width: 90px; height: 70px; object-fit: cover; border-radius: 6px;">
              <div style="flex: 1;">
                <h5><a href="{% url 'entrada_app:entry-detail' entrada.id %}" style="margin: 0 0 0.4rem 0; font-size: 1.1rem; color: #333; font-weight: 500;">
                  {{ entrada.title }}
                </a></h5>
                <p style="margin: 0; color: #666; font-size: 0.9rem;">{{ entrada.resume | truncatechars:40 }}</p>
                <a href="{% url 'entrada_app:entry-detail' entrada.id %}" style="color: #0d47a1; font-size: 0.9rem; text-decoration: none;">👀 Conoce más</a>
              </div>
            </div>
          </div>
        {% endfor %}
      </div>
    </div>

  </section>

  <!-- Sección de suscripción (centrada) -->
  <section class="grid-x align-center" style="margin: 3rem 0; text-align: center;">
    <div class="cell small-12 large-8" style="
      background: linear-gradient(135deg, #e3f2fd, #f8f9fa);
      padding: 2.5rem 2rem;
      border-radius: 12px;
      box-shadow: 0 4px 10px rgba(0,0,0,0.08);
    ">
      <h4 style="color: #0d47a1; margin-top: 0;">Optimiza tus operaciones con tecnología inteligente 🚀</h4>
            <p style="color: #444; font-size: 1.1rem; max-width: 600px; margin: 0 auto 1.5rem;">
              ⚡ Impulsa tu operación con automatización inteligente.<br>
              ¿Inventario lento? ¿Recepción desordenada? ¿Almacén sin control?<br><br>
              Ofrecemos soluciones prácticas para digitalizar y automatizar tus procesos clave:
             <ul style="margin-left: 1.2rem; padding-left: 0.5rem; list-style-type: none;">
                <li style="--i: 1;">📦 Inventario en tiempo real</li>
                <li style="--i: 2;">🗺️ Mapa interactivo del almacén</li>
                <li style="--i: 3;">🚚 Recepción ágil de mercancía</li>
             </ul>
              💡 Más eficiencia, menos errores.<br>
              👉 Déjame tu correo y te envío propuestas que realmente funcionan.
            </p>
      <button class="button" data-open="modal-suscripcion" style="
        background-color: #0d47a1;
        padding: 0.8rem 2rem;
        font-size: 1.1rem;
        border-radius: 30px;
        box-shadow: 0 4px 10px rgba(13, 71, 161, 0.3);
      ">📩 Enviar</button>
    </div>
  </section>

  <!-- Modal de suscripción -->
<div class="reveal" id="modal-suscripcion" data-reveal style="max-width: 400px; border-radius: 12px; overflow: hidden;">
  <div style="padding: 1.5rem; text-align: center;">
    <h5 style="color: #0d47a1; margin-top: 0;">Ingresa tu correo</h5>
    <p style="color: #666;">💬 Te enviamos la propuesta directo a tu bandeja, sin rodeos.</p>

    <!-- Formulario que apunta a tu URL de procesamiento -->
    <form method="POST" action="{% url 'home_app:add-suscription' %}">
      {% csrf_token %}
      <div class="input-group" style="margin-bottom: 1rem;">
        <input
          type="email"
          name="email"
          placeholder="tu@correo.com"
          required
          style="
            border: 1px solid #ccc;
            border-radius: 6px;
            padding: 0.7rem;
            width: 100%;
            outline: none;
          "
          onfocus="this.style.borderColor='#0d47a1';"
          onblur="this.style.borderColor='#ccc';"
        >
      </div>
      <button
        type="submit"
        class="button success"
        style="
          background-color: #0d47a1;
          padding: 0.7rem 2rem;
          border-radius: 25px;
          width: 100%;
          font-size: 1rem;
          color: #e3f2fd;
        ">
       📩 Enviar
      </button>
    </form>
  </div>
  <button class="close-button" data-close aria-label="Close modal" type="button" style="position: absolute; top: 1rem; right: 1rem; font-size: 1.5rem;">
    <span>&times;</span>
  </button>
</div>

  <!-- Artículos recientes (cuadrícula) -->
  <section class="grid-x grid-margin-x align-center" style="margin: 3rem 0;">
    <h3 style="color: #0d47a1; text-align: center; margin-bottom: 2rem; font-weight: 600;">Contenido actualizado</h3>

    <div class="grid-x grid-margin-x grid-margin-y">
      {% for entrada in entradas_recientes %}
        <div class="cell small-12 medium-6 large-4">
          <div class="card" style="
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
            transition: all 0.3s ease;
            height: 100%;
          " onmouseover="this.style.transform='translateY(-4px)';" onmouseout="this.style.transform='none';">
            <img src="{{ entrada.image.url }}" alt="{{ entrada.title }}" style="height: 180px; object-fit: cover;">
            <div class="card-section" style="padding: 1.2rem;">
              <h4><a href="{% url 'entrada_app:entry-detail' entrada.id %}" style="font-size: 1.2rem; color: #333; margin: 0.5rem 0;">{{entrada.title | truncatechars:40 }}</a></h4>
              <p style="color: #666; line-height: 1.5;">{{ entrada.resume | truncatechars:70 }}</p>
              <a href="{% url 'entrada_app:entry-detail' entrada.id %}" class="button hollow" style="
                border-color: #0d47a1;
                color: #0d47a1;
                font-size: 0.9rem;
                margin-top: 0.5rem;
                border-radius: 20px;
                padding: 0.4rem 1rem;
              ">¿Quieres saber más?</a>
            </div>
          </div>
        </div>
      {% endfor %}
    </div>
  </section>

</div>

{% include "includes/footer.html" %}

{% endblock content %}